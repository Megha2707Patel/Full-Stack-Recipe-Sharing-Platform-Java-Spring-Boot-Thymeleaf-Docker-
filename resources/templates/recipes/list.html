<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <th:block th:replace="~{layout :: layout('All Recipes • RecipeShare', ~{::section})}">
    <section>
      <div class="section-head">
        <h2>All Recipes</h2>
        <div class="head-actions">
          <form th:action="@{/recipes}" method="get" class="search inline">
            <input type="text" name="q" placeholder="Search recipes…" th:value="${q}">
            <button class="btn sm">Search</button>
        </form>
            <a th:href="@{/recipes/new}" class="btn sm" sec:authorize="isAuthenticated()">+ New Recipe</a>
        </div>
      </div>


      <div class="cards">
        <article class="card" th:each="r : ${recipes}">
          <a th:href="@{|/recipes/${r.id}|}">
            <div class="thumb" th:style="'background-image:url(' + (${r.imageUrl} ?: '/img/placeholder.jpg') + ')'"></div>
            <div class="card-body">
              <h3 th:text="${r.title}">Title</h3>
              <p class="muted" th:text="${#strings.abbreviate(r.description, 160)}"></p>
              <p class="tiny">by <span th:text="${r.authorName} ?: 'Unknown'"></span></p>
            </div>
          </a>
        </article>
      </div>
    </section>
  </th:block>
</html>
